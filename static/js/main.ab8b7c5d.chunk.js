(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,n,t){e.exports=t(17)},function(e,n,t){},,,,,,,function(e,n,t){e.exports=t.p+"static/media/fire.8dc70676.jpg"},function(e,n,t){e.exports=t.p+"static/media/water.5ce497de.jpg"},function(e,n,t){e.exports=t.p+"static/media/earth.197ad41f.png"},function(e,n,t){"use strict";t.r(n);t(7);var r=t(0),i=(t(13),t(2)),a=t(3),o=function(){var e,n,t,r,i,a=function(e){return Math.sin(6.283184*e)},o=function(e){return.003959503758*Math.pow(2,(e-128)/12)},s=function(e,n,t){var r,i,a,s,u,h,l,p=c[e.i[0]],d=e.i[1],f=e.i[3],w=c[e.i[4]],y=e.i[5],v=e.i[8],m=e.i[9],g=e.i[10]*e.i[10]*4,k=e.i[11]*e.i[11]*4,L=e.i[12]*e.i[12]*4,C=1/L,x=e.i[13],I=t*Math.pow(2,2-e.i[14]),A=new Int32Array(g+k+L),E=0,M=0;for(r=0,i=0;r<g+k+L;r++,i++)i>=0&&(i-=I,h=o(n+(15&(x=x>>8|(255&x)<<4))+e.i[2]-128),l=o(n+(15&x)+e.i[6]-128)*(1+8e-4*e.i[7])),a=1,r<g?a=r/g:r>=g+k&&(a-=(r-g-k)*C),s=h,f&&(s*=a*a),u=p(E+=s)*d,s=l,v&&(s*=a*a),u+=w(M+=s)*y,m&&(u+=(2*Math.random()-1)*m),A[r]=80*u*a|0;return A},c=[a,function(e){return e%1<.5?1:-1},function(e){return e%1*2-1},function(e){var n=e%1*4;return n<2?n-1:3-n}];this.init=function(a){e=a,n=a.endPattern,t=0,r=a.rowLen*a.patternLen*(n+1)*2,i=new Int32Array(r)},this.generate=function(){var o,u,h,l,p,d,f,w,y,v,m,g,k,L,C=new Int32Array(r),x=e.songData[t],I=e.rowLen,A=e.patternLen,E=0,M=0,S=!1,T=[];for(h=0;h<=n;++h)for(f=x.p[h],l=0;l<A;++l){var U=f?x.c[f-1].f[l]:0;U&&(x.i[U-1]=x.c[f-1].f[l+A]||0,U<16&&(T=[]));var D=c[x.i[15]],b=x.i[16]/512,V=Math.pow(2,x.i[17]-9)/I,_=x.i[18],K=x.i[19],B=43.23529*x.i[20]*3.141592/44100,O=1-x.i[21]/255,P=1e-5*x.i[22],j=x.i[23]/32,z=x.i[24]/512,G=6.283184*Math.pow(2,x.i[25]-9)/I,R=x.i[26]/255,F=x.i[27]*I&-2;for(m=(h*A+l)*I,p=0;p<4;++p)if(d=f?x.c[f-1].n[l+p*A]:0){T[d]||(T[d]=s(x,d,I));var N=T[d];for(u=0,o=2*m;u<N.length;u++,o+=2)C[o]+=N[u]}for(u=0;u<I;u++)(v=C[w=2*(m+u)])||S?(g=B,_&&(g*=D(V*w)*b+.5),M+=(g=1.5*Math.sin(g))*(k=O*(v-M)-(E+=g*M)),v=3==K?M:1==K?k:E,P&&(v=(v*=P)<1?v>-1?a(.25*v):-1:1,v/=P),S=(v*=j)*v>1e-5,L=v*(1-(y=Math.sin(G*w)*z+.5)),v*=y):L=0,w>=F&&(L+=C[w-F+1]*R,v+=C[w-F]*R),C[w]=0|L,C[w+1]=0|v,i[w]+=0|L,i[w+1]+=0|v}return++t/e.numChannels},this.createWave=function(){var e=44+2*r-8,n=e-36,t=new Uint8Array(44+2*r);t.set([82,73,70,70,255&e,e>>8&255,e>>16&255,e>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&n,n>>8&255,n>>16&255,n>>24&255]);for(var a=0,o=44;a<r;++a){var s=i[a];s=s<-32767?-32767:s>32767?32767:s,t[o++]=255&s,t[o++]=s>>8&255}return t},this.getData=function(e,n){for(var t=2*Math.floor(44100*e),r=new Array(n),a=0;a<2*n;a+=1){var o=t+a;r[a]=e>0&&o<i.length?i[o]/32768:0}return r}},s=function(){function e(n,t,r){Object(i.a)(this,e),this.player=new o,this.audio=document.createElement("audio"),n&&this.load(n,t,r)}return Object(a.a)(e,[{key:"load",value:function(e,n,t){this.stop(),this.player.init(e),this.player.generate();var r=this.player.createWave();this.audio.src=URL.createObjectURL(new Blob([r],{type:"audio/wav"})),n&&this.play(),this.audio.loop=!!t&&"loop"}},{key:"play",value:function(){this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.pause(),this.audio.currentTime=0}}]),e}(),c=new s,u=new(function(){function e(){var n=this;Object(i.a)(this,e),this.canvas=document.createElement("canvas"),this.engine=new r.Engine(this.canvas,!0,{},!0),document.getElementById("root").appendChild(this.canvas),this.engine.runRenderLoop(function(){n.engine.scenes.forEach(function(e){return e.render()})}),window.addEventListener("resize",function(){return n.engine.resize()}),this.engine.resize()}return Object(a.a)(e,[{key:"load",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.stop(),delete this.engine.scenes,this.engine.scenes=[],e(this.engine,this.canvas,c,n)}}]),e}()),h={songData:[{i:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,194,4,1,3,25,191,115,244,147,6,84,6],p:[5,1,2,1,1,1,1,3,4,1,2,1,2,1,2,,,7,8,7,8,7,8,7,8,6,9],c:[{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130],f:[21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,11,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,31]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,123],f:[]},{n:[114,,,,,,,,126,,,,,,,,114,,,,,,,,114,126,111,123,114,126,118,130],f:[13,,,,,,,,,,,,,,,,,,,,,,,,13,,13,,13,,13,11,29,,,,,,,,,,,,,,,,,,,,,,,,32,,41,,29,,25,15]},{n:[123,123,135,128,123,123,135,130,126,125,126,128,123,123,135,128,123,123,135,130,126,125,126,128,123,,99,,,,99,,,,,,,,,,,,,,,,,,,,,,,,,,111],f:[13,11,21,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,29,,25,113,,,,,,,,,,,,,,,,,,,,,,,,,,,,194]},{n:[111,,,,,,,,123,,,,,,,,111,,,,,,,,99],f:[]},{n:[111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111,111,123,,123,111,,123,111],f:[]},{n:[114,126,,126,114,,126,114,114,126,,126,114,,126,114,114,126,,126,114,,126,114,116,128,,128,116,,114,121],f:[]},{n:[],f:[]}]},{i:[0,255,117,1,0,255,110,0,1,0,4,6,35,0,0,0,0,0,0,2,14,1,1,39,76,5,0,0],p:[,1,1,1,1,1,1,2,,,,1,1,1,1,1,1,,,1,1,1,1,1,1],c:[{n:[147,,,,,,147,,,,147,,,,,,147,,,,,,147,,,,147,,,,147],f:[]},{n:[147],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,60,4,10,68,0,0,0,187,5,0,1,239,135,0,32,108,5,16,4],p:[,1,1,2,3,2,3,4,,,,2,3,2,3,2,3,,,5,5,5,5,5,5,4],c:[{n:[,,,,147,,,,,,,,148,,,,,,,,147,,,,,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[,,,,147,,,147,,,,,148,,,,,,,,147,,,147,,,147,,,147,147,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]},{n:[147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,68]},{n:[147,,,147,,,147,,147,,,147,,147,,147,147,,,147,,,147,,147,,,147,,147,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,35]}]},{i:[2,192,128,0,2,192,140,18,0,0,107,115,138,0,0,0,136,5,1,2,8,92,21,56,148,5,85,8],p:[3,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2,1,2],c:[{n:[111],f:[]},{n:[114],f:[]},{n:[111],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,56]}]},{i:[3,0,127,0,3,68,127,0,1,218,4,4,40,0,0,1,55,4,1,2,67,115,124,190,67,6,39,1],p:[,,,1,2,1,2,3,,,,1,2,1,2,1,2,,,1,4,1,4,1,4,3],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],f:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,147,147],f:[]},{n:[147],f:[]},{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147,,,147],f:[]}]},{i:[0,91,128,0,0,95,128,12,0,0,12,0,67,0,0,0,0,0,0,2,255,15,0,32,83,3,134,4],p:[,,,1,2,3,2,1,2,,,1,2,3,2,1,2,,,,,4,5,4,5],c:[{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],f:[5,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,157,,162,,126],f:[]},{n:[159,,147,,154,,147,,157,,147,,154,,150,,159,,147,,154,,147,,162,,147,,154,,150,,123],f:[5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3]},{n:[159,,162,,164,,,,159,,162,164,,,162,,159,,162,,164,,,,159,,162,164,,,162],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,25]},{n:[157,,162,,164,,,,157,,162,164,,,162,,157,,162,,164,,,,157,,162,164,,,162],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]}]},{i:[3,146,140,0,1,224,128,3,0,0,92,0,95,0,0,3,179,5,1,3,37,135,63,67,150,3,157,6],p:[,,,,,,,,,1,2,3,,1,2,1,2,3,,4,5,,,,,3],c:[{n:[123,,,,,,,,,,,,,,,,130],f:[11,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,92,67]},{n:[133,,,,,,,,,,,,,,,138,126,,,,,,,,,,,,125],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,95,,,,,,,,,,,,,,,,,,,,,,,,,,,,29]},{n:[123],f:[24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,52,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,67]},{n:[123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,116],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,95]},{n:[133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,118],f:[]}]},{i:[0,255,106,1,0,255,106,0,1,0,5,7,164,0,0,0,0,0,0,2,255,0,2,16,83,5,53,1],p:[,,,,,,,1,,,,,,,,,,1,,,,,,,,1],c:[{n:[147],f:[]}]}],rowLen:5513,patternLen:32,endPattern:26,numChannels:8},l={songData:[{i:[0,255,152,0,0,255,152,12,0,0,2,0,60,193,3,0,0,0,0,2,255,0,0,32,47,3,0,0],p:[1],c:[{n:[123],f:[]}]}],rowLen:5513,patternLen:1,endPattern:0,numChannels:1},p={songData:[{i:[0,255,152,0,0,255,152,12,0,0,2,0,60,193,3,0,0,0,0,2,255,0,0,32,47,3,123,5],p:[1],c:[{n:[146],f:[]}]}],rowLen:5513,patternLen:1,endPattern:0,numChannels:1},d=function(){function e(n){Object(i.a)(this,e),this._keys=new Set,this.onUpdate=n||function(){}}return Object(a.a)(e,[{key:"onKeyUp",value:function(e){var n=this;return function(t){e||t.preventDefault(),n._keys.delete(t.key)}}},{key:"onKeyDown",value:function(e){var n=this;return function(t){e||t.preventDefault(),n._keys.add(t.key)}}},{key:"getTypeName",value:function(){return"GenericKeyHandlerInput"}},{key:"getSimpleName",value:function(){return"genericKey"}},{key:"attachControl",value:function(e,n){this._onKeyDown=this.onKeyDown(n),this._onKeyUp=this.onKeyUp(n),e.addEventListener("keydown",this._onKeyDown,!1),e.addEventListener("keyup",this._onKeyUp,!1)}},{key:"detachControl",value:function(e){e.removeEventListener("keydown",this._onKeyDown),e.removeEventListener("keyup",this._onKeyUp),this._keys=new Set,delete this._onKeyDown,delete this._onKeyUp}},{key:"checkInputs",value:function(){this.onUpdate(this._keys)}}]),e}(),f=t(4),w=t(5),y=r.MeshBuilder.CreateSphere,v=function(e,n){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,c=n.z,u=void 0===c?0:c,h=n.diameter,l=void 0===h?4:h,p=Object(w.a)(n,["x","y","z","diameter"]),d=new y("playerFire",Object(f.a)({diameter:l},p),e);return d.position=new r.Vector3(a,s,u),d.material=new r.StandardMaterial("fire",e),d.material.ambientTexture=new r.Texture(t(14),e),d},m=r.MeshBuilder.CreateSphere,g=function(e,n){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,c=n.z,u=void 0===c?0:c,h=n.diameter,l=new m("playerWater",{diameter:void 0===h?4:h},e);return l.position=new r.Vector3(a,s,u),l.material=new r.StandardMaterial("water",e),l.material.ambientTexture=new r.Texture(t(15),e),l},k=r.MeshBuilder.CreateSphere,L=function(e,n){var i=n.x,a=void 0===i?0:i,o=n.y,s=void 0===o?0:o,c=n.z,u=void 0===c?0:c,h=n.diameter,l=new k("playerEarth",{diameter:void 0===h?4:h},e);return l.position=new r.Vector3(a,s,u),l.material=new r.StandardMaterial("earth",e),l.material.ambientTexture=new r.Texture(t(16),e),l},C={songData:[{i:[0,214,104,1,0,204,104,0,1,229,4,5,35,0,0,0,231,6,1,1,255,15,0,32,0,4,0,0],p:[1],c:[{n:[135],f:[]}]}],rowLen:5513,patternLen:1,endPattern:0,numChannels:1},x={playerFire:v,playerWater:g,playerEarth:L},I=r.PhysicsImpostor.SphereImpostor,A=r.PhysicsImpostor.BoxImpostor,E=r.MeshBuilder.CreateGround,M=function(e,n,t,i){var a=new r.Scene(e);a.clearColor=r.Color3.Black();var o=new s(C),c=new r.FollowCamera("FollowCam",r.Vector3.Zero(),a);c.checkCollisions=!0,c.applyGravity=!0,c.radius=5,c.attachControl(n,!0);var u=new r.DirectionalLight("dir01",new r.Vector3(-1,-2,-1),a);u.position=new r.Vector3(20,40,20),u.intensity=.5;var h=new r.ShadowGenerator(1024,u);h.useExponentialShadowMap=!0;var l=x["player".concat(i.player)](a,{diameter:1});h.getShadowMap().renderList.push(l),l.position.y=2,c.lockedTarget=l,c.position=new r.Vector3(l.y,0,-10),h.addShadowCaster(l);var p=E("ground1",{width:16,height:16,depth:16,subdivs:16},a);p.receiveShadows=!0,a.enablePhysics(),l.physicsImpostor=new r.PhysicsImpostor(l,I,{mass:1,restitution:.9},a),p.physicsImpostor=new r.PhysicsImpostor(p,A,{mass:0,restitution:.9},a),l.physicsImpostor.registerOnPhysicsCollide(p.physicsImpostor,function(e,n){o.stop(),o.play()});var d=function(e){var n=r.Vector3.Zero();e.has("ArrowLeft")?n.x=1:e.has("ArrowRight")&&(n.x=-1),e.has("ArrowUp")?n.z=-1:e.has("ArrowDown")&&(n.z=1),e.delete("ArrowUp"),e.delete("ArrowDown"),e.delete("ArrowLeft"),e.delete("ArrowRight"),l.physicsImpostor.setLinearVelocity(n)},f=new Set;return n.addEventListener("keydown",function(e){f.add(e.key),d(f)}),n.addEventListener("keyup",function(e){f.delete(e.key),d(f)}),a},S=r.GUI.AdvancedDynamicTexture,T=r.GUI.Control,U=T.VERTICAL_ALIGNMENT_BOTTOM,D=T.VERTICAL_ALIGNMENT_TOP,b=r.GUI.TextBlock;u.load(function(e,n,t){var i=new r.Scene(e);i.clearColor=r.Color3.Black(),t.load(h,!0,!0);var a=new s(l),o=new s(p),c=S.CreateFullscreenUI("UI"),f=new r.GUI.TextBlock;f.text="\n\n\n\n\n\nChoose your avatar",f.color="white",f.fontSize=40,f.textVerticalAlignment=D,c.addControl(f);var w=new b;w.color="white",w.fontSize=200,w.textVerticalAlignment=U,c.addControl(w);var y={};y.light1=new r.HemisphericLight("light1",new r.Vector3(1,1,0),i),y.light2=new r.PointLight("light2",new r.Vector3(0,1,-1),i),y.playerFire=v(i,{}),y.playerWater=g(i,{x:7}),y.playerEarth=L(i,{x:14});var m=new r.FreeCamera("camera",r.Vector3.Zero(),i);m.inputs.clear();var k=["Fire","Water","Earth"],C=0;return m.inputs.add(new d(function(e){e.has("ArrowLeft")&&(a.play(),e.delete("ArrowLeft"),C=(C+k.length-1)%k.length),e.has("ArrowRight")&&(a.play(),e.delete("ArrowRight"),C=(C+1)%k.length),e.has("Enter")&&(o.play(),e.delete("Enter"),u.load(M,{player:k[C]}));var n=i.getMeshByName("player".concat(k[C]));m.lockedTarget=n,m.position=new r.Vector3(n.y,0,-10),w.text="".concat(k[C],"\n")})),m.attachControl(n,!0),i})}],[[6,2,1]]]);
//# sourceMappingURL=main.ab8b7c5d.chunk.js.map